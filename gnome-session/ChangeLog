Mon Mar 16 00:52:21 1998  Tom Tromey  <tromey@cygnus.com>

	* save-session.c (main): Removed local "zap" variable.

	* main.c (ignore): New function.
	(main): Ignore SIGPIPE.

Tue Mar 10 21:40:28 1998  Tom Tromey  <tromey@cygnus.com>

	* save.c (run_commands): Pass saved directory information to
	execute_async().
	* exec.c (execute_async): Added `dir' argument.

Sun Mar  8 18:36:38 1998  Tom Tromey  <tromey@cygnus.com>

	* save.c (run_commands): `def' now a gboolean.
	(read_session): Likewise.
	(delete_session): Likewise.

	* Makefile.am (INCLUDES): Added GNOME_INCLUDEDIR.  Define
	GNOMELOCALEDIR.

Sat Mar  7 11:45:07 1998  Tom Tromey  <tromey@cygnus.com>

	* save-session.c (options): New structure.
	(parser): Likewise.
	(usage): Removed.
	(zap): New global.
	(parse_an_arg): New function.
	(main): Use new argument parsing and client-handling functions.
	* Makefile.am (gnome_session_SOURCES): Removed testbed.c, added
	main.c.
	* testbed.c: Removed.
	* main.c: New file.

Thu Feb 26 02:26:51 1998  Tom Tromey  <tromey@cygnus.com>

	* exec.c (errno): Declare if not a macro.

	* Makefile.am (bin_PROGRAMS): Only define if session support
	available.

	* Makefile.am (bin_PROGRAMS): Added save-session.
	(save_session_SOURCES): New macro.
	* save-session.c: New file.

	* testbed.c (main): Don't call gtk_init.

	* exec.c (execute_async): "pid" is a pid_t, not an int.  Close
	read end of pipe in child; mark write end as close-on-exec.

	* save.c (run_default_session): Run gnome-help-browser.

Mon Feb 23 00:49:05 1998  Tom Tromey  <tromey@cygnus.com>

	* save.c (run_default_session): NULL-terminate argv.
	* exec.c (report_errno): New function.
	(execute_async): Use it.

1998-02-19  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* testbed.c (main): Added app_id "gsm-testbed".

Mon Feb 16 00:04:09 1998  Tom Tromey  <tromey@cygnus.com>

	* exec.c (execute_async): Wait for child process.

	* save.c (run_default_session): New function.
	(read_session): If no saved session, and trying to load the
	default, then call run_default_session.

	* manager.c (check_session_end): Call gtk_main_quit if shutting
	down.

	* manager.h (execute_func): Removed.
	* save.c (run_commands): Removed executor argument.

	* manager.c (check_session_end): Save anyway_list first.

	* save.c (write_one_client): If restart style is RestartNever,
	don't bother saving client.
	(write_session): Added list2 argument.

	* manager.c (anyway_list): New global.
	(free_client): Do nothing if client is NULL.
	(close_connection): Take restart hints into account.
	(check_session_end): Pass anyway_list to write_session.

	* save.c: Include <gtk/gtk.h>.

Mon Feb 16 11:15:43 KST 1998  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>

	* save.c: Include <config.h>.
	Replace "gnome-session.h" with "gnome-client.h".

Sat Feb 14 01:45:26 1998  Tom Tromey  <tromey@cygnus.com>

	* exec.c (execute_once): Removed.
	* manager.h (execute_once): Removed decl.
	* save.c (properties): Removed GNOME_SM_INIT_COMMAND.
	(read_session): Don't run initialization commands.

	* Makefile.am (LDADD): Don't include LEXLIB or DL_LIB.  Do include
	INTLLIBS.

Mon Feb  9 13:24:01 1998  Tom Tromey  <tromey@cygnus.com>

	* save.c (write_session): gnome -> session.
	(run_commands): Likewise.
	(read_session): Likewise.
	(delete_session): Likewise.
	* Makefile.am (bin_PROGRAMS): Changed name to gnome-session.
	(gnome_session_SOURCES): Likewise.

Tue Feb  3 00:38:40 1998  Tom Tromey  <tromey@cygnus.com>

	* save.c (write_session): gsm->gnome.
	(run_commands): Likewise.
	(read_session): Likewise.
	(delete_session): Likewise.

	* exec.c (execute_async): Wrote.

	* Makefile.am (bin_PROGRAMS): Program named "gnome".
	(gnome_SOURCES): Renamed.

	* save.c (delete_session): Call gnome_config_sync().

Mon Feb  2 23:08:50 1998  Tom Tromey  <tromey@cygnus.com>

	* save.c (write_one_client): Use gnome_config_set_vector.
	(write_session): Use prefix that doesn't result in new sub-keys.
	(read_session): Use new prefix.
	(run_commands): Likewise.  Use gnome_config_get_vector_with_default.

Thu Jan 29 16:49:12 EST 1998 Nathan Bryant <bryant@cs.usm.maine.edu>

	* Makefile.am: add DL_LIB.

Wed Jan 21 00:41:27 1998  Federico Mena <federico@bananoid.nuclecu.unam.mx>

	* gsm.c (gsm_generate_session_list): Replace snprintf with
	g_snprintf.

Tue Jan 20 18:43:50 1998  Tom Tromey  <tromey@cygnus.com>

	* gsm.h, gsm.c, gsm-backend.c: Removed.

Sun Jan 18 15:28:06 1998  Tom Tromey  <tromey@cygnus.com>

	* manager.c (check_session_end): New function.
	(save_yourself_done): Use it.
	(close_connection): Likewise.

	* manager.c: Include <string.h>.
	* ice.c: Include <config.h>.

	* testbed.c (main): Read session.

Fri Jan 16 23:50:48 1998  Tom Tromey  <tromey@cygnus.com>

	* ice.c (initialize_ice): Use Gnome's version number.

Sun Jan  4 13:24:47 1998  Tom Tromey  <tromey@cygnus.com>

	* save.c (read_session): Changed return value.  Started
	implementation.
	(run_commands): New function.
	(delete_session): Use it.

	* manager.c (add_zombie): New function.
	* manager.h (add_zombie): Declare.

	* Makefile.am (gsm_SOURCES): Include exec.c.
	* exec.c: New file.
	* manager.h (execute_async): Declare.

	* save.c (write_one_client): Added `number' argument; changed
	return value; changed how information represented in file.
	(prefix): No longer global.
	(write_session): Changed how information represented in file.
	(delete_session): Wrote.

Fri Jan  2 00:11:49 1998  Tom Tromey  <tromey@cygnus.com>

	* manager.c (save_yourself_done): Move save_finished_list to
	live_list when done.

Thu Jan  1 15:53:26 1998  Tom Tromey  <tromey@cygnus.com>

	* manager.h: Declare delete_session.
	* manager.c (save_yourself_done): Call write_session.
	* save.c (set_session_name): Made name argument const.
	(read_session): Likewise.
	(write_session): Made list argument const.
	(propsave): New type.
	(properties): New array.
	(NUM_PROPERTIES): New macro.
	(write_one_client): New function.
	(write_session): Wrote.
	(delete_session): New function.

	* prop.c (find_property_by_name): Made client argument const.
	(find_card8_property): Likewise.
	(find_string_property): Likewise.
	(find_vector_property): Likewise.

Sat Dec 27 12:39:40 1997  Tom Tromey  <tromey@cygnus.com>

	* save.c: New file.
	* prop.c: New file.
	* Makefile.am (gsm_SOURCES): Include prop.c, save.c.

	* manager.h: Declare find_property_by_name, find_card8_property,
	find_string_property, find_vector_property.

	* manager.c (save_helper): Removed.
	(x_save_type, x_interact_style, x_fast): Removed.
	(save_session): Traverse list by hand.
	(find_property_by_name): Moved to prop.c; exported.

Fri Dec 26 00:00:42 1997  Tom Tromey  <tromey@cygnus.com>

	* manager.c (find_client_by_connection): New function.
	(io_error_handler): New function.
	* manager.h: Declare io_error_handler.
	* ice.c (initialize_ice): Install IO error handler.

	* manager.c (close_connection): Remove client from all lists.
	Free client structure.

	* auth.c (write_iceauth): Make sure data is in range for fprintf.

	* Makefile: Removed.
	* Makefile.am: New file.
	* testbed.c: New file.

Thu Dec 25 00:12:44 1997  Tom Tromey  <tromey@cygnus.com>

	* ice.c (accept_connection): Must wait for ICE connection to leave
	pending state.

Wed Dec 24 23:33:09 1997  Tom Tromey  <tromey@cygnus.com>

	* auth.c, auth.h: Modified files from X11R6.3 `xsm' program.
	* TODO, manager.c, manager.h, ice.c: New files.

